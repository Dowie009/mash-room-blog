---
import Layout from '../layouts/Layout.astro';
import SignalFlowLazy from '../components/SignalFlowLazy.astro';
// React Widgetã‚’é™çš„HTMLã«ç½®ãæ›ãˆ (hydrationã‚¹ã‚¯ãƒªãƒ—ãƒˆå•é¡Œå›é¿)
// import EstimateWidget from '../components/EstimateWidget.tsx';
// import BookingWidget from '../components/BookingWidget.tsx';
import { getCollection } from 'astro:content';

// Content Collectionsã‹ã‚‰è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
const allPosts = await getCollection('blog');
// æ—¥ä»˜ã§ã‚½ãƒ¼ãƒˆï¼ˆæ–°ã—ã„é †ï¼‰
const sortedPosts = allPosts.sort((a, b) =>
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);

// æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
const formatDate = (date: Date) => {
  return date.toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit'
  }).replace(/\//g, '.');
};

// ã‚«ãƒ†ã‚´ãƒªãƒ©ãƒ™ãƒ«
const categoryLabels: Record<string, string> = {
  'daw': 'DAW',
  'gear': 'GEAR',
  'plugin': 'PLUGIN',
  'biz': 'BIZ',
  'tips': 'TIPS',
  'essay': 'ESSAY',
};

/**
 * Museum Grid: Instagramé¢¨ã®Masonry ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
 * featured(2x2), tall(1x2), wide(2x1), standard(1x1)
 */
function getMuseumGridType(index: number): 'featured' | 'tall' | 'wide' | 'standard' {
  // ãƒ‘ã‚¿ãƒ¼ãƒ³: featured -> standard -> standard -> tall -> standard -> wide -> repeat
  if (index === 0) return 'featured';
  const pattern = (index - 1) % 6;
  if (pattern === 0 || pattern === 1) return 'standard';
  if (pattern === 2) return 'tall';
  if (pattern === 3 || pattern === 4) return 'standard';
  return 'wide';
}

// ãƒ‡ãƒãƒƒã‚°: ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’å¼·åˆ¶çš„ã«è¨­å®šï¼ˆ1å›ã ã‘å®šç¾©ï¼‰
const DEBUG_VERSION = "v10.9.5-MUSEUM-GRID";
const BUILD_TIME = new Date().toISOString();
const BUILD_TIMESTAMP = Date.now(); // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ç”¨
console.log('[GEAR.ASTRO DEBUG] ==========================================');
console.log('[GEAR.ASTRO DEBUG] Build Time:', BUILD_TIME);
console.log('[GEAR.ASTRO DEBUG] Build Timestamp:', BUILD_TIMESTAMP);
console.log('[GEAR.ASTRO DEBUG] Using Version:', DEBUG_VERSION);
console.log('[GEAR.ASTRO DEBUG] File Path: src/pages/gear.astro');
console.log('[GEAR.ASTRO DEBUG] ==========================================');
---

<Layout 
  title="MASHROOM | GEAR LAB (BLUE)"
  version={DEBUG_VERSION}
  canonicalUrl={`${Astro.url.origin}${Astro.url.pathname}?v=8.4.1&t=${BUILD_TIMESTAMP}`}
>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&family=Zen+Old+Mincho:wght@700;900&family=Space+Grotesk:wght@300;500;700;900&family=Noto+Sans+JP:wght@300;400;500;700&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">

  <div class="noise"></div>
  <div class="bg-grid"></div>

  <!-- LOADER -->
  <div class="loader-wrap">
    <div class="loader-text-container font-tech text-5xl font-bold gap-2">
      <span class="loader-char">M</span><span class="loader-char">A</span><span class="loader-char">S</span><span class="loader-char">H</span>
      <span class="loader-char" style="color: var(--accent-color)">.</span>
      <span class="loader-char">R</span>
      <span class="loader-char">O</span>
      <span class="loader-char">O</span>
      <span class="loader-char">M</span>
    </div>
  </div>

  <!-- HEADER -->
  <header class="fixed top-0 w-full p-6 flex justify-between items-center z-[100] bg-white/90 backdrop-blur-md border-b border-gray-200 header-item opacity-0">
    <div class="flex items-end gap-3">
      <a href="/" class="flex items-center gap-2 group text-black">
        <div class="w-2 h-2 bg-[var(--accent-color)] rounded-full animate-pulse"></div>
        <span class="font-tech text-lg font-bold tracking-tight">MASHROOM.LAB</span>
      </a>
      <span class="font-mono text-[10px] text-gray-400 mb-0.5" id="version-display" data-version-debug={BUILD_TIME} data-timestamp={BUILD_TIMESTAMP}>{DEBUG_VERSION}</span>
    </div>
    
    <div class="flex gap-4">
      <button class="w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center hover:bg-black hover:text-white transition-colors">
        <i data-lucide="search" class="w-4 h-4"></i>
      </button>
      <nav class="hidden md:flex items-center gap-6 font-mono text-xs tracking-widest text-gray-500 border-l border-gray-200 pl-6 ml-2">
        <a href="/" class="hover:text-black transition-colors">HOME</a>
        <a href="/gear" class="text-black font-bold">GEAR</a>
        <a href="#" class="hover:text-black transition-colors">CONTACT</a>
      </nav>
    </div>
  </header>

  <!-- HERO - ç©ºé–“æ‹¡å¼µç‰ˆ -->
  <section class="pt-40 pb-16 container mx-auto px-6 md:px-12 relative z-10 hero-item opacity-0 min-h-[500px]" id="hero-section">
    <div class="flex flex-col md:flex-row items-end justify-between mb-8">
      <div>
        <span class="font-mono text-[var(--accent-color)] text-sm tracking-widest block mb-6">CHAPTER 02</span>
        <h1 class="font-mincho text-6xl md:text-8xl font-black leading-[1] text-black">
          <span class="block overflow-hidden"><span class="hero-title-char">æ©Ÿ</span><span class="hero-title-char">æ</span><span class="hero-title-char">ã¨</span></span>
          <span class="block overflow-hidden"><span class="hero-title-char">å®Ÿ</span><span class="hero-title-char">é¨“</span><span class="hero-title-char">è¨˜</span><span class="hero-title-char">éŒ²</span></span>
        </h1>
      </div>
      <div class="text-right max-w-sm mt-8 md:mt-0 font-mono text-sm text-gray-500">
        ARCHIVE OF SOUND & LOGIC / UPDATED: 2026.01.07
      </div>
    </div>
    <div class="w-full relative border-t border-b border-[var(--line-color)] signal-flow-wrapper">
      <SignalFlowLazy />
    </div>
  </section>

  <!-- MORPHING NAV - è¦–èªæ€§å‘ä¸Šç‰ˆ -->
  <div class="container mx-auto px-6 relative z-20">
    <div class="nav-placeholder" id="nav-trigger">
      <nav class="filter-nav pos-top opacity-0 hero-item" id="morph-nav">
        <div class="nav-grid-layout nav-expanded">
          <div class="nav-category-item border-l-0 pl-0">
            <button class="tech-btn tech-btn-lg active" data-filter="all">
              <i data-lucide="grid" class="btn-icon"></i><span class="btn-text">ALL</span>
            </button>
            <span class="nav-desc">å…¨ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®æ–°ç€è¨˜äº‹ã€‚<br>ã¾ãšã¯ã“ã“ã‹ã‚‰ã€‚</span>
          </div>
          <div class="nav-category-item">
            <button class="tech-btn tech-btn-lg" data-filter="daw">
              <i data-lucide="monitor" class="btn-icon"></i><span class="btn-text">DAW</span>
            </button>
            <span class="nav-desc">Studio Oneã‚’ä¸­å¿ƒã¨ã—ãŸ<br>åˆ¶ä½œãƒ•ãƒ­ãƒ¼ã®ãƒãƒƒã‚¯ã€‚</span>
          </div>
          <div class="nav-category-item">
            <button class="tech-btn tech-btn-lg" data-filter="gear">
              <i data-lucide="speaker" class="btn-icon"></i><span class="btn-text">GEAR</span>
            </button>
            <span class="nav-desc">ã‚¢ãƒŠãƒ­ã‚°æ©Ÿæã®æ¸©ã‚‚ã‚Šã¨<br>ç‰©ç†çš„ãªãƒãƒ–ã®é­”åŠ›ã€‚</span>
          </div>
          <div class="nav-category-item">
            <button class="tech-btn tech-btn-lg" data-filter="plugin">
              <i data-lucide="zap" class="btn-icon"></i><span class="btn-text">PLUGIN</span>
            </button>
            <span class="nav-desc">æœ€æ–°ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ¤œè¨¼ã¨<br>ç‹¬è‡ªã®ãƒ—ãƒªã‚»ãƒƒãƒˆã€‚</span>
          </div>
          <div class="nav-category-item">
            <button class="tech-btn tech-btn-lg" data-filter="biz">
              <i data-lucide="briefcase" class="btn-icon"></i><span class="btn-text">BIZ</span>
            </button>
            <span class="nav-desc">ã‚¹ã‚¿ã‚¸ã‚ªçµŒå–¶ã€è£œåŠ©é‡‘ã€<br>ãŠé‡‘ã®ãƒªã‚¢ãƒ«ãªè©±ã€‚</span>
          </div>
          <div class="sort-guide-area">
            <div class="flex items-center gap-4">
              <p class="font-mono text-xs text-gray-500">
                <span class="text-[var(--accent-color)]">:: CONTROL ROOM ::</span><br>
                ãƒŸã‚­ã‚·ãƒ³ã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚ˆã†ã«ã€å¿…è¦ãªæƒ…å ±ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãã ã•ã„ã€‚
              </p>
            </div>
            <div class="flex gap-4 items-center">
              <div class="flex items-center gap-1 border-l border-gray-300 pl-4 ml-2">
                <button class="p-1.5 hover:bg-black hover:text-white rounded active transition-colors" id="view-grid">
                  <i data-lucide="layout-grid" class="w-4 h-4"></i>
                </button>
                <button class="p-1.5 hover:bg-black hover:text-white rounded transition-colors" id="view-list">
                  <i data-lucide="list" class="w-4 h-4"></i>
                </button>
              </div>
            </div>
          </div>
          
          {/* ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”¨ã®ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ï¼ˆpos-sideã®æ™‚ã®ã¿è¡¨ç¤ºï¼‰ */}
          <div class="side-view-toggle">
            <div class="flex flex-col items-center gap-2">
              <button class="side-view-btn active" id="side-view-grid" title="ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º">
                <i data-lucide="layout-grid" class="w-5 h-5"></i>
              </button>
              <button class="side-view-btn" id="side-view-list" title="ãƒªã‚¹ãƒˆè¡¨ç¤º">
                <i data-lucide="list" class="w-5 h-5"></i>
              </button>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="container mx-auto px-6 md:px-12 md:pl-[140px] min-h-screen relative z-10 transition-all duration-500" id="main-content-area">
    {/* GRID MODE: Museum Grid - Instagramé¢¨ã®Masonryãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */}
    <div class="ig-grid" id="article-grid">
      {sortedPosts.slice(0, 6).map((post, index) => {
        const gridType = getMuseumGridType(index);
        return (
          <article
            class={`card-item ${gridType} item`}
            data-category={post.data.category}
            data-date={post.data.date.toISOString().split('T')[0]}
          >
            <a href={`/blog/${post.slug}`} class="card-link">
              <div class="card-image">
                <img src={post.data.thumbnail} alt={post.data.title} loading="lazy" />
              </div>
              <div class="card-overlay">
                <span class="card-category">{categoryLabels[post.data.category] || post.data.category.toUpperCase()}</span>
                <h3 class="card-title">{post.data.title}</h3>
                <span class="card-date">{formatDate(post.data.date)}</span>
              </div>
            </a>
          </article>
        );
      })}
    </div>

    {/* AND MORE ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
    <div class="and-more-section" id="and-more-btn">
      <button class="and-more-button">
        <span class="and-more-text">& more</span>
        <i data-lucide="chevron-down" class="w-5 h-5"></i>
      </button>
    </div>

    {/* è¿½åŠ è¨˜äº‹ã‚°ãƒªãƒƒãƒ‰ï¼ˆåˆæœŸéè¡¨ç¤ºï¼‰ */}
    <div class="ig-grid ig-grid-extra" id="article-grid-extra" style="display: none;">
      {sortedPosts.slice(6).map((post, index) => {
        const gridType = getMuseumGridType(index);
        return (
          <article
            class={`card-item ${gridType} item`}
            data-category={post.data.category}
            data-date={post.data.date.toISOString().split('T')[0]}
          >
            <a href={`/blog/${post.slug}`} class="card-link">
              <div class="card-image">
                <img src={post.data.thumbnail} alt={post.data.title} loading="lazy" />
              </div>
              <div class="card-overlay">
                <span class="card-category">{categoryLabels[post.data.category] || post.data.category.toUpperCase()}</span>
                <h3 class="card-title">{post.data.title}</h3>
                <span class="card-date">{formatDate(post.data.date)}</span>
              </div>
            </a>
          </article>
        );
      })}
    </div>

    {/* ARCHIVE ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
    <div class="archive-section">
      <div class="archive-column">
        <h4 class="archive-title">
          <i data-lucide="archive" class="w-4 h-4"></i>
          <span>ARCHIVE</span>
        </h4>
        <ul class="archive-list">
          <li><a href="#">2026å¹´1æœˆ (3)</a></li>
          <li><a href="#">2025å¹´12æœˆ (4)</a></li>
          <li><a href="#">2025å¹´11æœˆ (3)</a></li>
        </ul>
      </div>
      <div class="archive-column">
        <h4 class="archive-title">
          <i data-lucide="trending-up" class="w-4 h-4"></i>
          <span>POPULAR</span>
        </h4>
        <ul class="archive-list">
          {sortedPosts.slice(0, 5).map((post, index) => (
            <li>
              <a href={`/blog/${post.slug}`}>
                <span class="popular-rank">{String(index + 1).padStart(2, '0')}</span>
                <span class="popular-title">{post.data.title}</span>
              </a>
            </li>
          ))}
        </ul>
      </div>
    </div>
    
    {/* LIST MODE: å®Œå…¨ã«åˆ†é›¢ã•ã‚ŒãŸãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆSystem Log & Data Tableï¼‰ */}
    <div class="list-container" id="article-list" style="display: none;">
      {sortedPosts.map((post, index) => (
        <article 
          class="list-row-item" 
          data-category={post.data.category} 
          data-date={post.data.date.toISOString().split('T')[0]}
          data-thumbnail={post.data.thumbnail}
        >
          <div class="list-date font-mono">
            {String(index + 1).padStart(2, '0')}. / {formatDate(post.data.date)}
          </div>
          <div class="list-category">
            {categoryLabels[post.data.category] || post.data.category.toUpperCase()}
          </div>
          <h3 class="list-title">{post.data.title}</h3>
          <div class="list-meta">
            {post.data.tags && post.data.tags.length > 0 && (
              <span class="meta-tag">{post.data.tags[0]}</span>
            )}
          </div>
          {/* ãƒ›ãƒãƒ¼æ™‚ã®ã‚µãƒ ãƒã‚¤ãƒ« */}
          <div class="list-thumbnail">
            <img src={post.data.thumbnail} alt={post.data.title} loading="lazy" />
          </div>
        </article>
      ))}
    </div>

    <!-- CTA SECTION: CONTROL ROOM - é™çš„HTMLç‰ˆ (hydrationã‚¹ã‚¯ãƒªãƒ—ãƒˆå•é¡Œå›é¿) -->
    <div class="cta-section-wrap">
      <div class="font-mono text-base text-[var(--accent-color)] mb-8 tracking-widest pl-6 md:pl-0">:: CONTROL ROOM ::</div>
      <div class="cta-grid">
        <!-- å·¦å´: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡æ¡ˆå†… -->
        <div class="cta-widget-box cta-booking-static">
          <div class="widget-header">
            <div class="header-top">
              <span class="widget-tag-blue">ONLINE CONSULTATION</span>
            </div>
            <h3 class="widget-title">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡</h3>
            <p class="widget-desc">LINEé€šè©±ãƒ»Zoomãƒ»Google Meetã§æ°—è»½ã«ã”ç›¸è«‡</p>
          </div>
          <div class="consultation-info">
            <div class="info-item">
              <span class="info-icon-circle"><i data-lucide="clock" class="w-5 h-5"></i></span>
              <div class="info-content">
                <span class="info-label">å¯¾å¿œæ™‚é–“</span>
                <span class="info-value">10:00 ã€œ 21:00</span>
              </div>
            </div>
            <div class="info-item">
              <span class="info-icon-circle"><i data-lucide="calendar" class="w-5 h-5"></i></span>
              <div class="info-content">
                <span class="info-label">äºˆç´„å—ä»˜</span>
                <span class="info-value">7æ—¥å…ˆã¾ã§</span>
              </div>
            </div>
            <div class="info-item">
              <span class="info-icon-circle"><i data-lucide="video" class="w-5 h-5"></i></span>
              <div class="info-content">
                <span class="info-label">å¯¾å¿œãƒ„ãƒ¼ãƒ«</span>
                <span class="info-value">LINE / Zoom / Meet</span>
              </div>
            </div>
          </div>
          <a href="#contact" class="cta-book-btn">
            <span>äºˆç´„ã™ã‚‹</span>
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </a>
        </div>
        <!-- å³å´: æ–™é‡‘æ¡ˆå†… -->
        <div class="cta-widget-box cta-pricing-static">
          <div class="widget-header-dark">
            <span class="widget-tag-green">PRICING</span>
            <h3 class="widget-title-dark">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡æ–™é‡‘</h3>
            <p class="widget-desc-dark">æ™‚é–“ã‚’é¸ã‚“ã§ã€ä»Šã™ãäºˆç´„</p>
          </div>
          <div class="price-list">
            <div class="price-item">
              <span class="price-duration">15åˆ†</span>
              <span class="price-value free">ç„¡æ–™</span>
              <span class="price-note">ãŠè©¦ã—ãƒ»ç°¡å˜ãªè³ªå•ã«</span>
            </div>
            <div class="price-item recommended">
              <span class="recommend-badge">ãŠã™ã™ã‚</span>
              <span class="price-duration">30åˆ†</span>
              <span class="price-value">Â¥500<span class="tax">ï¼ˆç¨è¾¼ï¼‰</span></span>
              <span class="price-note">å…·ä½“çš„ãªãŠæ‚©ã¿ç›¸è«‡ã«</span>
            </div>
            <div class="price-item">
              <span class="price-duration">60åˆ†</span>
              <span class="price-value">Â¥2,000<span class="tax">ï¼ˆç¨è¾¼ï¼‰</span></span>
              <span class="price-note">ã˜ã£ãã‚Šæ·±æ˜ã‚Šã—ãŸã„æ–¹ã«</span>
            </div>
          </div>
          <div class="pricing-note">
            <span class="note-icon">ğŸ’¡</span>
            <span class="note-text">åˆå›15åˆ†ã¯ç„¡æ–™ã§ãŠè©¦ã—ã„ãŸã ã‘ã¾ã™ã€‚<br/>DTMãƒ»æ©Ÿæé¸ã³ãƒ»ã‚¹ã‚¿ã‚¸ã‚ªæ§‹ç¯‰ãªã©ã€ä½•ã§ã‚‚ã”ç›¸è«‡ãã ã•ã„ã€‚</span>
          </div>
        </div>
      </div>
      <div class="absolute bottom-0 left-0 w-full opacity-20"><canvas id="string-canvas-2" class="string-canvas"></canvas></div>
    </div>

    <!-- PROFILE -->
    <div class="profile-section" id="author-section">
      <div class="max-w-4xl mx-auto flex flex-col md:flex-row gap-8 items-center">
        <div class="w-24 h-24 flex-shrink-0 bg-gray-200 overflow-hidden rounded-full border-2 border-black">
          <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=200&auto=format&fit=crop" 
               class="w-full h-full object-cover grayscale" alt="é“ã‚">
        </div>
        <div class="text-center md:text-left flex-grow">
          <div class="font-mono text-[var(--accent-color)] text-[10px] mb-2 tracking-widest">OWNER / ENGINEER</div>
          <h2 class="font-mincho text-2xl font-bold mb-2">é“ã‚ (Dowie)</h2>
          <p class="text-gray-500 text-xs leading-loose">
            æœ­å¹Œã‚’æ‹ ç‚¹ã¨ã™ã‚‹éŸ³æ¥½ã‚¹ã‚¿ã‚¸ã‚ªã€ŒMASHROOMã€ã‚ªãƒ¼ãƒŠãƒ¼ã€‚<br>
            ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã€æ©Ÿæé¸å®šã€ãã—ã¦çµŒå–¶ã®ç‹­é–“ã§æ—¥ã€…å®Ÿé¨“ä¸­ã€‚
          </p>
        </div>
        <a href="#" class="tech-btn text-[10px] border border-gray-300 px-4 py-2 rounded-full hover:bg-black hover:text-white transition-colors">PROFILE &rarr;</a>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="bg-white border-t border-gray-100 py-20 relative z-10">
    <div class="container mx-auto px-6 md:pl-[120px] flex justify-between items-end">
      <span class="font-tech text-4xl font-bold text-[#111]">MASHROOM.GEAR</span>
      <p class="text-[10px] text-gray-400 font-mono text-right">
        SAPPORO MUSIC STUDIO<br>GEAR LAB <span id="footer-version">{DEBUG_VERSION}</span><br>EST. 2025
      </p>
    </div>
  </footer>

  <script is:inline>
    // ãƒ‡ãƒãƒƒã‚°: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’ç¢ºèª
    console.log('[CLIENT DEBUG] ==========================================');
    console.log('[CLIENT DEBUG] Page loaded at:', new Date().toISOString());
    const versionDisplay = document.getElementById('version-display');
    const footerVersion = document.getElementById('footer-version');
    if (versionDisplay) {
      console.log('[CLIENT DEBUG] Header version element:', versionDisplay.textContent);
      console.log('[CLIENT DEBUG] Header version data-attr:', versionDisplay.getAttribute('data-version-debug'));
    } else {
      console.error('[CLIENT DEBUG] Header version element NOT FOUND!');
    }
    if (footerVersion) {
      console.log('[CLIENT DEBUG] Footer version element:', footerVersion.textContent);
    } else {
      console.error('[CLIENT DEBUG] Footer version element NOT FOUND!');
    }
    console.log('[CLIENT DEBUG] ==========================================');
    
    // Wait for Layout.astro scripts to load first, then run
    const initGearScripts = () => {
      // Check if all required scripts are loaded
      if (typeof lucide === 'undefined' || typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined' || typeof Flip === 'undefined' || typeof Lenis === 'undefined') {
        setTimeout(initGearScripts, 50);
        return;
      }
      
      lucide.createIcons();
      gsap.registerPlugin(Flip, ScrollTrigger);

    /* ------------------------------------------------
       SMOOTH SCROLL
       ------------------------------------------------ */
    const lenis = new Lenis({ duration: 1.2, easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)) });
    function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
    requestAnimationFrame(raf);

    /* ------------------------------------------------
       INTRO LOADER
       ------------------------------------------------ */
    const introTl = gsap.timeline();
    introTl.to(".loader-char", { y: 0, opacity: 1, duration: 1, stagger: 0.1, ease: "power4.out" })
           .to(".loader-char", { y: "-100%", opacity: 0, duration: 0.8, delay: 0.3, ease: "power4.in" })
           .to(".loader-wrap", { y: "-100%", duration: 1, ease: "power4.inOut" }, "-=0.3")
           .to(".header-item, .hero-item, #morph-nav", { opacity: 1, y: 0, stagger: 0.1, duration: 1, ease: "power2.out" }, "-=0.5")
           .to(".hero-title-char", { y: 0, opacity: 1, duration: 1.2, stagger: 0.05, ease: "power3.out" }, "-=1.0");

    /* ------------------------------------------------
       GLITCH NAV TRANSITION
       ------------------------------------------------ */
    const navTrigger = document.querySelector("#nav-trigger");
    const nav = document.querySelector("#morph-nav");
    
    // ã‚°ãƒªãƒƒãƒã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°ï¼ˆå·¦å´ã§ã®ã¿ä½¿ç”¨ï¼‰
    const glitchInEffect = (element) => {
      if (!element) {
        console.error('[DEBUG] glitchInEffect: element not found');
        return;
      }
      console.log('[DEBUG] glitchInEffect: starting animation');
      const tl = gsap.timeline();
      // ã‚°ãƒªãƒƒãƒã§å·¦å´ã‹ã‚‰ç™»å ´
      tl.set(element, { 
        opacity: 0, 
        x: -100,
        force3D: true
      })
        .to(element, { 
          opacity: 1, 
          x: gsap.utils.random(-15, -5), 
          duration: 0.04,
          ease: "none"
        })
        .to(element, { 
          x: gsap.utils.random(-10, 0), 
          duration: 0.04,
          ease: "none"
        })
        .to(element, { 
          x: gsap.utils.random(-5, 0), 
          duration: 0.04,
          ease: "none"
        })
        .to(element, { 
          x: 0, 
          duration: 0.1,
          ease: "power2.out",
          onComplete: () => console.log('[DEBUG] glitchInEffect: animation complete')
        });
    };
    
    if (navTrigger && nav) {
      console.log('[DEBUG] navTrigger and nav found, setting up ScrollTrigger');
      
      // CSS transitionã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–ã™ã‚‹é–¢æ•°
      const disableTransition = () => {
        nav.style.transition = 'none';
      };
      const enableTransition = () => {
        nav.style.transition = '';
      };
      
      ScrollTrigger.create({
        trigger: navTrigger, 
        start: "top top", 
        end: "bottom top",
        onEnter: () => {
          console.log('[DEBUG] ScrollTrigger onEnter triggered');
          // ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é™ã‹ã«æ¶ˆã™ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ï¼‰
          disableTransition();
          gsap.set(nav, { opacity: 0, x: 0, y: 0 });
          nav.style.pointerEvents = 'none';
          
          // å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«åˆ‡ã‚Šæ›¿ãˆ
          requestAnimationFrame(() => {
            console.log('[DEBUG] Switching to pos-side');
            nav.classList.remove("pos-top"); 
            nav.classList.add("pos-side"); 
            lucide.createIcons();
            // å·¦å´ã§ã‚°ãƒªãƒƒãƒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ç™»å ´
            enableTransition();
            glitchInEffect(nav);
            nav.style.pointerEvents = 'auto';
          });
        },
        onLeaveBack: () => {
          console.log('[DEBUG] ScrollTrigger onLeaveBack triggered');
          // å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é™ã‹ã«æ¶ˆã™
          disableTransition();
          gsap.set(nav, { opacity: 0, x: 0, y: 0 });
          nav.style.pointerEvents = 'none';
          
          // ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã™
          requestAnimationFrame(() => {
            console.log('[DEBUG] Switching to pos-top');
            nav.classList.remove("pos-side"); 
            nav.classList.add("pos-top");
            enableTransition();
            gsap.set(nav, { opacity: 1, x: 0, y: 0 });
            nav.style.pointerEvents = 'auto';
          });
        }
      });
    } else {
      console.error('[DEBUG] navTrigger or nav not found:', { navTrigger, nav });
    }

    /* ------------------------------------------------
       VIEW MODE STATE MANAGEMENT
       ------------------------------------------------ */
    let viewMode = 'grid'; // 'grid' or 'list'
    
    /* ------------------------------------------------
       FILTER LOGIC (Grid Mode & List Mode)
       ------------------------------------------------ */
    const buttons = document.querySelectorAll('.tech-btn[data-filter]');
    const gridContainer = document.getElementById('article-grid');
    const listContainer = document.getElementById('article-list');
    
    function applyFilter(filterValue) {
      if (viewMode === 'grid') {
        // ã‚°ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆFlipã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
        const gridItems = Array.from(gridContainer.querySelectorAll('.item'));
        
        // è¡¨ç¤ºã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
        const visibleItems = gridItems.filter(item => {
          const category = item.getAttribute('data-category');
          return filterValue === 'all' || category === filterValue;
        });
        
        // éè¡¨ç¤ºã«ãªã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
        const hiddenItems = gridItems.filter(item => {
          const category = item.getAttribute('data-category');
          return filterValue !== 'all' && category !== filterValue;
        });
        
        // éè¡¨ç¤ºã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
        if (hiddenItems.length > 0) {
          gsap.to(hiddenItems, {
            opacity: 0,
            scale: 0.9,
            duration: 0.25,
            ease: "power2.in",
            onComplete: () => {
              hiddenItems.forEach(item => {
                item.style.display = 'none';
              });
            }
          });
        }
        
        // è¡¨ç¤ºã‚¢ã‚¤ãƒ†ãƒ ã®çŠ¶æ…‹ã‚’å–å¾—ï¼ˆFlipã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
        if (visibleItems.length > 0) {
          const state = Flip.getState(visibleItems);
          
          // è¡¨ç¤ºã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
          visibleItems.forEach(item => {
            item.style.display = '';
          });
          
          // Flipã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
          Flip.from(state, {
            duration: 0.4,
            scale: false,
            absolute: false,
            ease: "power2.out",
            stagger: 0.02,
            onEnter: (elements) => {
              gsap.fromTo(elements, 
                { opacity: 0, y: 20 },
                { opacity: 1, y: 0, duration: 0.3, ease: "power2.out", stagger: 0.02 }
              );
            },
            onComplete: () => {
              requestAnimationFrame(() => ScrollTrigger.refresh());
            }
          });
        }
      } else {
        // ãƒªã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        const listItems = Array.from(listContainer.querySelectorAll('.list-row-item'));
        listItems.forEach(item => {
          const category = item.getAttribute('data-category');
          if (filterValue === 'all' || category === filterValue) {
            gsap.to(item, { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" });
            item.style.display = '';
          } else {
            gsap.to(item, { opacity: 0, y: -10, duration: 0.25, ease: "power2.in", onComplete: () => {
              item.style.display = 'none';
            }});
          }
        });
      }
    }
    
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        buttons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const filterValue = btn.getAttribute('data-filter');
        applyFilter(filterValue);
      });
    });

    /* ------------------------------------------------
       VIEW MODE TOGGLE - å®Œå…¨åˆ†é›¢å®Ÿè£…
       ------------------------------------------------ */
    const btnGrid = document.getElementById('view-grid');
    const btnList = document.getElementById('view-list');
    
    function switchViewMode(mode) {
      if (mode === 'grid') {
        // ã‚°ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
        viewMode = 'grid';
        gsap.to(listContainer, { 
          opacity: 0, 
          duration: 0.3, 
          ease: "power2.in",
          onComplete: () => {
            listContainer.style.display = 'none';
            gridContainer.style.display = '';
            gsap.fromTo(gridContainer, 
              { opacity: 0 },
              { opacity: 1, duration: 0.3, ease: "power2.out", onComplete: () => {
                requestAnimationFrame(() => ScrollTrigger.refresh());
              }}
            );
          }
        });
      } else {
        // ãƒªã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
        viewMode = 'list';
        gsap.to(gridContainer, { 
          opacity: 0, 
          duration: 0.3, 
          ease: "power2.in",
          onComplete: () => {
            gridContainer.style.display = 'none';
            listContainer.style.display = '';
            gsap.fromTo(listContainer, 
              { opacity: 0 },
              { opacity: 1, duration: 0.3, ease: "power2.out" }
            );
          }
        });
      }
      
      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
      updateViewButtons(mode);
      
      // ç¾åœ¨ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å†é©ç”¨
      const activeFilter = document.querySelector('.tech-btn.active')?.getAttribute('data-filter') || 'all';
      applyFilter(activeFilter);
      
      // ã‚°ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆãŸå ´åˆã¯ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã‚’å†ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
      if (mode === 'grid') {
        requestAnimationFrame(() => {
          ScrollTrigger.refresh();
          setupParallax();
        });
      }
    }
    
    function updateViewButtons(activeMode) {
      // ä¸Šéƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒœã‚¿ãƒ³
      if (btnGrid && btnList) {
        if (activeMode === 'grid') {
          btnGrid.classList.add('active');
          btnList.classList.remove('active');
        } else {
          btnGrid.classList.remove('active');
          btnList.classList.add('active');
        }
      }
      // ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒœã‚¿ãƒ³
      const sideBtnGrid = document.getElementById('side-view-grid');
      const sideBtnList = document.getElementById('side-view-list');
      if (sideBtnGrid && sideBtnList) {
        if (activeMode === 'grid') {
          sideBtnGrid.classList.add('active');
          sideBtnList.classList.remove('active');
        } else {
          sideBtnGrid.classList.remove('active');
          sideBtnList.classList.add('active');
        }
      }
    }
    
    if (btnGrid && btnList && gridContainer && listContainer) {
      btnGrid.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        if (viewMode !== 'grid') {
          switchViewMode('grid');
        }
      });
      
      btnList.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        if (viewMode !== 'list') {
          switchViewMode('list');
        }
      });
    }
    
    // ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒœã‚¿ãƒ³
    const sideBtnGrid = document.getElementById('side-view-grid');
    const sideBtnList = document.getElementById('side-view-list');
    if (sideBtnGrid && sideBtnList && gridContainer && listContainer) {
      sideBtnGrid.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        if (viewMode !== 'grid') {
          switchViewMode('grid');
        }
      });
      
      sideBtnList.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        if (viewMode !== 'list') {
          switchViewMode('list');
        }
      });
    }

    /* ------------------------------------------------
       AND MORE ãƒœã‚¿ãƒ³
       ------------------------------------------------ */
    const andMoreBtn = document.getElementById('and-more-btn');
    const extraGrid = document.getElementById('article-grid-extra');
    if (andMoreBtn && extraGrid) {
      andMoreBtn.addEventListener('click', () => {
        extraGrid.style.display = '';
        gsap.fromTo(extraGrid,
          { opacity: 0, y: 30 },
          { opacity: 1, y: 0, duration: 0.6, ease: "power2.out" }
        );
        gsap.to(andMoreBtn, {
          opacity: 0,
          y: -20,
          duration: 0.3,
          ease: "power2.in",
          onComplete: () => {
            andMoreBtn.style.display = 'none';
          }
        });
      });
    }

    /* ------------------------------------------------
       SCROLL FOCUS & PARALLAX (ã‚°ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰å°‚ç”¨)
       ------------------------------------------------ */
    function setupParallax() {
      if (viewMode !== 'grid') return;

      const cards = gsap.utils.toArray('.ig-grid .card-item');
      cards.forEach(card => {
        const img = card.querySelector('.card-image img');
        if (img) {
          gsap.fromTo(img, 
            { y: "-10%" }, 
            { 
              y: "10%", 
              ease: "none", 
              scrollTrigger: { 
                trigger: card, 
                start: "top bottom", 
                end: "bottom top", 
                scrub: true 
              } 
            }
          );
        }
      });
    }
    
    // åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    setupParallax();

    /* ------------------------------------------------
       NETWORK CANVAS (Signal Flow)
       ------------------------------------------------ */
    // Signal Flowã¯SignalFlowLazyã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™
    // é…å»¶èª­ã¿è¾¼ã¿ã¨Three.jså®Ÿè£…ãŒå«ã¾ã‚Œã¦ã„ã¾ã™

    /* ------------------------------------------------
       ELASTIC STRING
       ------------------------------------------------ */
    class ElasticString {
      constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        if (!this.canvas) return;
        this.ctx = this.canvas.getContext('2d');
        this.mouse = { x: 0, y: 0, isDown: false };
        this.resize(); 
        this.tension = 0.4; 
        this.dampening = 0.9;
        window.addEventListener('resize', () => this.resize());
        this.canvas.addEventListener('mousemove', (e) => this.onMove(e));
        this.canvas.addEventListener('mouseleave', () => { this.mouse.isDown = false; });
        this.animate();
      }
      resize() {
        this.width = this.canvas.parentElement.offsetWidth;
        this.height = this.canvas.parentElement.offsetHeight || 100;
        this.canvas.width = this.width; 
        this.canvas.height = this.height;
        this.cp = { 
          x: this.width/2, 
          y: this.height/2, 
          vx: 0, 
          vy: 0, 
          targetX: this.width/2, 
          targetY: this.height/2 
        };
      }
      onMove(e) {
        const rect = this.canvas.getBoundingClientRect();
        const x = e.clientX - rect.left; 
        const y = e.clientY - rect.top;
        this.mouse.x = x;
        this.mouse.y = y;
        
        // ãƒã‚¦ã‚¹ãŒç·šã®è¿‘ãï¼ˆ50pxä»¥å†…ï¼‰ã«ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        const distanceToLine = Math.abs(y - this.cp.y);
        if (distanceToLine < 80) { 
          this.mouse.isDown = true; 
          // ã‚ˆã‚Šå¼·ãåå¿œã•ã›ã‚‹
          const pullStrength = (80 - distanceToLine) / 80; // 0-1ã®å€¤
          this.cp.y += (y - this.cp.y) * pullStrength * 0.3;
          this.cp.x += (x - this.cp.x) * pullStrength * 0.2;
        } else { 
          this.mouse.isDown = false; 
        }
      }
      update() {
        if (this.mouse.isDown) {
          // ãƒã‚¦ã‚¹ã«å¼•ã£å¼µã‚‰ã‚Œã¦ã„ã‚‹æ™‚ã¯å°‘ã—ã ã‘ãƒã‚¦ãƒ³ã‚¹
          const dx = this.mouse.x - this.cp.x;
          const dy = this.mouse.y - this.cp.y;
          this.cp.vx += dx * 0.15;
          this.cp.vy += dy * 0.15;
        } else {
          // å…ƒã®ä½ç½®ã«æˆ»ã‚ã†ã¨ã™ã‚‹åŠ›
          const forceY = (this.cp.targetY - this.cp.y) * this.tension;
          this.cp.vy += forceY; 
          const forceX = (this.width/2 - this.cp.x) * 0.1;
          this.cp.vx += forceX;
        }
        // æ¸›è¡°ã‚’é©ç”¨
        this.cp.vy *= this.dampening; 
        this.cp.y += this.cp.vy;
        this.cp.vx *= this.dampening; 
        this.cp.x += this.cp.vx;
      }
      draw() {
        this.ctx.clearRect(0, 0, this.width, this.height);
        this.ctx.beginPath(); 
        this.ctx.moveTo(0, this.height/2);
        this.ctx.quadraticCurveTo(this.cp.x, this.cp.y, this.width, this.height/2);
        this.ctx.lineWidth = 1; 
        this.ctx.strokeStyle = '#ccc'; 
        this.ctx.stroke();
        this.ctx.fillStyle = '#007aff';
        this.ctx.beginPath(); 
        this.ctx.arc(0, this.height/2, 3, 0, Math.PI*2);
        this.ctx.arc(this.width, this.height/2, 3, 0, Math.PI*2);
        this.ctx.fill();
      }
      animate() { 
        this.update(); 
        this.draw(); 
        requestAnimationFrame(() => this.animate()); 
      }
    }
    new ElasticString('string-canvas-1');
    new ElasticString('string-canvas-2');
    };
    
    // Start after window load event
    window.addEventListener('load', initGearScripts);
  </script>
</Layout>

<style>
  /* ãƒãƒ£ãƒ—ã‚¿ãƒ¼2ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  :root {
    --bg-color: #f4f6f8;
    --card-bg: #ffffff;
    --text-main: #0f172a;
    --text-sub: #64748b;
    --accent-color: #007aff;
    --line-color: #cbd5e1;
  }

  body {
    background-color: var(--bg-color);
    color: var(--text-main);
    font-family: 'Noto Sans JP', sans-serif;
  }

  .font-mincho { font-family: 'Zen Old Mincho', serif; }
  .font-tech { font-family: 'Space Grotesk', sans-serif; }
  .font-code { font-family: 'Fira Code', monospace; }

  .noise {
    position: fixed; inset: 0; z-index: 90; pointer-events: none;
    background: url('https://grainy-gradients.vercel.app/noise.svg');
    opacity: 0.03;
  }

  .bg-grid {
    position: fixed; inset: 0; z-index: -1;
    background-image: 
      linear-gradient(rgba(0,122,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,122,255,0.03) 1px, transparent 1px);
    background-size: 30px 30px;
  }

  /* ä»–ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯å…ƒã®HTMLã‹ã‚‰ç¶™æ‰¿ */
  .loader-wrap {
    position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
    z-index: 9999; background: #0f172a;
    display: flex; justify-content: center; align-items: center;
    color: white; pointer-events: none;
  }

  .loader-text { overflow: hidden; display: flex; gap: 0.5rem; }
  .loader-char { display: inline-block; transform: translateY(100%); color: var(--accent-color); }

  .nav-placeholder { min-height: 35vh; margin-bottom: 3rem; position: relative; z-index: 50; }
  
  .filter-nav {
    z-index: 50;
  }
  
  /* pos-topã®æ™‚ã ã‘transitionã‚’æœ‰åŠ¹åŒ– */
  .filter-nav.pos-top { 
    width: 100%; 
    padding: 2rem 0; 
    background: transparent;
    transition: opacity 0.3s ease;
  }
  
  /* pos-sideã®æ™‚ã¯transitionãªã—ï¼ˆGSAPã§åˆ¶å¾¡ï¼‰ */
  .filter-nav.pos-side {
    transition: none !important;
  }
  
  .nav-grid-layout {
    display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem;
    max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;
  }
  @media (min-width: 1024px) { .nav-grid-layout { grid-template-columns: repeat(5, 1fr); } }

  .nav-category-item {
    display: flex; flex-direction: column; gap: 0.8rem;
    border-left: 1px solid var(--line-color); padding-left: 1.5rem;
  }
  .nav-desc { font-size: 0.7rem; color: var(--text-sub); line-height: 1.6; }
  
  .sort-guide-area {
    grid-column: 1 / -1; margin-top: 3rem; padding-top: 2rem;
    border-top: 1px solid var(--line-color);
    display: flex; justify-content: space-between; align-items: center;
  }

  .filter-nav.pos-side {
    position: fixed; top: 0; left: 0; width: 120px; height: 100vh;
    flex-direction: column; justify-content: center; padding: 2rem 0.5rem;
    border-right: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.98);
    gap: 0.5rem; align-items: flex-start; box-shadow: 2px 0 20px rgba(0,0,0,0.08);
    backface-visibility: hidden;
    transform: translateZ(0);
  }
  .filter-nav.pos-side .nav-grid-layout { display: flex; flex-direction: column; gap: 0.25rem; width: 100%; align-items: flex-start; padding: 0 0.5rem; }
  .filter-nav.pos-side .nav-category-item { border: none; padding: 0.5rem 0; width: 100%; align-items: flex-start; gap: 0.25rem; }
  .filter-nav.pos-side .nav-desc { display: block; font-size: 0.55rem; color: #94a3b8; line-height: 1.4; }
  .filter-nav.pos-side .sort-guide-area { display: none; }
  
  /* ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”¨ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ */
  .side-view-toggle {
    display: none;
  }
  
  .filter-nav.pos-side .side-view-toggle {
    display: flex;
    position: static;
    margin-top: auto;
    width: 100%;
    padding: 1rem 0;
    border-top: 1px solid rgba(0,0,0,0.1);
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
  }
  
  .side-view-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    background: transparent;
    color: var(--text-sub);
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }
  
  .side-view-btn:hover {
    background: rgba(0, 122, 255, 0.1);
    color: var(--accent-color);
    border-color: rgba(0, 122, 255, 0.2);
  }
  
  .side-view-btn.active {
    background: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
  }
  
  .filter-nav.pos-side .side-view-btn {
    width: 100%;
    border-radius: 4px;
  }

  .tech-btn {
    position: relative; background: transparent; color: var(--text-main);
    font-family: 'Space Grotesk', sans-serif; font-weight: 700; font-size: 1rem;
    letter-spacing: 0.05em; text-transform: uppercase; cursor: pointer;
    transition: color 0.2s; display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0;
  }
  .tech-btn:hover, .tech-btn.active { color: var(--accent-color); }

  /* è¦–èªæ€§å‘ä¸Š: å¤§ãã„ãƒœã‚¿ãƒ³ (text-lg/xl, font-bold, gap-8~12) */
  .tech-btn.tech-btn-lg {
    font-size: 1.25rem; /* text-xl */
    font-weight: 800;
    letter-spacing: 0.08em;
    gap: 0.75rem;
    padding: 0.75rem 0;
  }

  .nav-expanded {
    gap: 3rem; /* gap-12 ç›¸å½“ */
  }

  @media (min-width: 1024px) {
    .nav-expanded {
      gap: 2.5rem; /* å¤§ç”»é¢ã§ã¯ã‚„ã‚„è©°ã‚ã‚‹ */
    }
  }
  
  .filter-nav.pos-side .tech-btn {
    flex-direction: row; gap: 0.5rem; padding: 0.25rem 0; width: 100%; height: auto; justify-content: flex-start;
    font-size: 0.7rem; color: var(--text-sub);
  }
  .filter-nav.pos-side .tech-btn:hover, .filter-nav.pos-side .tech-btn.active {
    color: var(--accent-color);
  }
  .filter-nav.pos-side .tech-btn.active::before {
     content: ''; position: absolute; left: -0.5rem; top: 50%; transform: translateY(-50%);
     width: 3px; height: 100%; background: var(--accent-color);
  }

  .btn-icon { display: none; }
  .filter-nav.pos-side .btn-icon { display: block; width: 16px; height: 16px; flex-shrink: 0; }
  .btn-text { display: block; }
  .filter-nav.pos-side .btn-text { display: block; font-size: 0.65rem; font-weight: 600; }

  /* ============================================
     MUSEUM GRID: Instagramé¢¨ã®Masonryãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
     ä½™ç™½ã¨æµ®éŠæ„Ÿã®ã‚ã‚‹ã‚¢ãƒ¼ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼é¢¨ãƒ‡ã‚¶ã‚¤ãƒ³
     ============================================ */
  .ig-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem; /* 24px - ä½™ç™½ã‚’è¨ˆç®—ã•ã‚ŒãŸãƒã‚¤ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ«ãƒƒã‚¯ãƒ–ãƒƒã‚¯é¢¨ã« */
    grid-auto-flow: dense;
    padding-bottom: 2rem;
  }

  /* ã‚«ãƒ¼ãƒ‰ã‚¢ã‚¤ãƒ†ãƒ å…±é€š */
  .card-item {
    position: relative;
    overflow: hidden;
    border-radius: 4px;
    background: transparent; /* ãƒœãƒ¼ãƒ€ãƒ¼å‰Šé™¤ã€ç”»åƒã®å­˜åœ¨æ„Ÿã‚’å¼·èª¿ */
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.4s ease;
  }

  .card-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.15);
  }

  .card-link {
    display: block;
    width: 100%;
    height: 100%;
    text-decoration: none;
    color: inherit;
  }

  .card-image {
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1), filter 0.4s ease;
    filter: brightness(0.95);
  }

  .card-item:hover .card-image img {
    transform: scale(1.05);
    filter: brightness(1);
  }

  /* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆç”»åƒä¸Šã«ãƒ†ã‚­ã‚¹ãƒˆï¼‰ */
  .card-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 1.5rem;
    background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 100%);
    color: white;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .card-category {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.6rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--accent-color);
  }

  .card-title {
    font-family: 'Zen Old Mincho', serif;
    font-size: 1rem;
    font-weight: 700;
    line-height: 1.4;
    margin: 0;
  }

  .card-date {
    font-family: 'Fira Code', monospace;
    font-size: 0.65rem;
    opacity: 0.7;
  }

  /* ã‚°ãƒªãƒƒãƒ‰ã‚µã‚¤ã‚ºãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ */
  .card-item.featured {
    grid-column: span 2;
    grid-row: span 2;
    min-height: 400px;
  }

  .card-item.featured .card-title {
    font-size: 1.5rem;
  }

  .card-item.tall {
    grid-column: span 1;
    grid-row: span 2;
    min-height: 380px;
  }

  .card-item.wide {
    grid-column: span 2;
    grid-row: span 1;
    min-height: 200px;
  }

  .card-item.standard {
    grid-column: span 1;
    grid-row: span 1;
    min-height: 200px;
  }

  /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
  @media (max-width: 767px) {
    .ig-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    .card-item.featured,
    .card-item.tall,
    .card-item.wide,
    .card-item.standard {
      grid-column: span 1;
      grid-row: span 1;
      min-height: 250px;
    }
  }

  /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå¯¾å¿œ */
  @media (min-width: 768px) and (max-width: 1023px) {
    .ig-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1.25rem;
    }
    .card-item.featured {
      grid-column: span 2;
      grid-row: span 2;
    }
    .card-item.tall {
      grid-column: span 1;
      grid-row: span 2;
    }
    .card-item.wide {
      grid-column: span 2;
      grid-row: span 1;
    }
  }

  /* AND MORE ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
  .and-more-section {
    display: flex;
    justify-content: center;
    padding: 3rem 0;
  }

  .and-more-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    background: transparent;
    border: 1px solid var(--line-color);
    border-radius: 50px;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--text-sub);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .and-more-button:hover {
    background: var(--accent-color);
    border-color: var(--accent-color);
    color: white;
  }

  .and-more-text {
    font-style: italic;
  }

  /* è¿½åŠ è¨˜äº‹ã‚°ãƒªãƒƒãƒ‰ */
  .ig-grid-extra {
    margin-top: 0;
  }

  /* ARCHIVE ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
  .archive-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    padding: 4rem 0;
    border-top: 1px solid var(--line-color);
    margin-top: 2rem;
  }

  .archive-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .archive-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.15em;
    color: var(--text-main);
    margin: 0 0 0.5rem 0;
  }

  .archive-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .archive-list li a {
    font-family: 'Noto Sans JP', sans-serif;
    font-size: 0.8rem;
    color: var(--text-sub);
    text-decoration: none;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .archive-list li a:hover {
    color: var(--accent-color);
  }

  .popular-rank {
    font-family: 'Fira Code', monospace;
    font-size: 0.7rem;
    color: var(--accent-color);
    font-weight: 600;
  }

  .popular-title {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  @media (max-width: 767px) {
    .archive-section {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
  }
  
  /* ============================================
     LIST MODE: System Log & Data Table Design (å®Œå…¨ã«ç‹¬ç«‹)
     ============================================ */
  .list-container { 
    display: flex;
    flex-direction: column;
    gap: 0;
    padding-bottom: 4rem;
  }

  .list-container .list-row-item {
    position: relative;
    display: grid !important;
    grid-template-columns: 120px 80px 1fr auto;
    gap: 2rem; /* ç­‰é–“éš”ã«çµ±ä¸€ */
    align-items: center;
    padding: 1.5rem 2rem; /* ç­‰é–“éš”ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
    border-bottom: 1px solid rgba(0, 0, 0, 0.08); /* å¢ƒç›®ã‚’å°‘ã—æ¿ƒã */
    background: #ffffff;
    height: auto !important;
    min-height: 90px; /* ç­‰é–“éš”ã®é«˜ã• */
    margin: 0;
    border-radius: 0;
    border: none !important;
    box-shadow: none !important;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    cursor: pointer;
    overflow: hidden;
  }
  
  /* æœ€å¾Œã®é …ç›®ã®borderã‚’æ¶ˆã™ */
  .list-container .list-row-item:last-child {
    border-bottom: none;
  }
  
  /* ãƒ›ãƒãƒ¼æ™‚ã®å·¦ç«¯ã‚¢ã‚¯ã‚»ãƒ³ãƒˆãƒãƒ¼ */
  .list-container .list-row-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0;
    background: var(--accent-color, #007aff);
    transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    z-index: 1;
  }
  
  .list-container .list-row-item:hover {
    background: #fafbfc !important;
    border-bottom-color: rgba(0, 0, 0, 0.12) !important;
    transform: none !important;
  }
  
  /* ãƒ›ãƒãƒ¼æ™‚ã®å·¦ç«¯ã‚¢ã‚¯ã‚»ãƒ³ãƒˆãƒãƒ¼ - ã‚«ãƒ†ã‚´ãƒªãƒ¼è‰²ã«åˆã‚ã›ã‚‹ */
  .list-container .list-row-item:hover::before {
    width: 3px;
  }
  .list-container .list-row-item[data-category="daw"]:hover::before {
    background: #007aff;
  }
  .list-container .list-row-item[data-category="gear"]:hover::before {
    background: #34c759;
  }
  .list-container .list-row-item[data-category="plugin"]:hover::before {
    background: #af52de;
  }
  .list-container .list-row-item[data-category="biz"]:hover::before {
    background: #ff9500;
  }
  .list-container .list-row-item[data-category="tips"]:hover::before {
    background: #ff2d55;
  }
  .list-container .list-row-item[data-category="essay"]:hover::before {
    background: #5ac8fa;
  }
  
  /* ãƒ›ãƒãƒ¼æ™‚ã®ã‚µãƒ ãƒã‚¤ãƒ«æµ®ãå‡ºã— */
  .list-container .list-row-item .list-thumbnail {
    position: absolute;
    right: -220px;
    top: 50%;
    transform: translateY(-50%) scale(0.85);
    width: 200px;
    height: 120px;
    border-radius: 8px;
    opacity: 0;
    pointer-events: none;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    z-index: 10;
    box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.25);
    overflow: hidden;
    background: #f1f5f9;
  }
  
  .list-container .list-row-item .list-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: grayscale(30%);
    transition: filter 0.3s ease;
  }
  
  .list-container .list-row-item:hover .list-thumbnail {
    right: 2rem;
    opacity: 1;
    transform: translateY(-50%) scale(1);
  }
  
  .list-container .list-row-item:hover .list-thumbnail img {
    filter: grayscale(0%);
  }
  
  /* Column 1: No/Date */
  .list-container .list-row-item .list-date {
    font-family: 'Fira Code', 'Space Grotesk', monospace;
    font-size: 0.7rem;
    color: #94a3b8;
    font-weight: 400;
    letter-spacing: 0.05em;
    transition: color 0.3s ease;
    grid-column: 1;
  }
  
  .list-container .list-row-item:hover .list-date {
    color: var(--accent-color, #007aff);
  }
  
  /* Column 2: Status/Category Badge - ã‚«ãƒ†ã‚´ãƒªãƒ¼è‰²åˆ†ã‘ */
  .list-container .list-row-item .list-category {
    grid-column: 2;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.25rem 0.75rem;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.65rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    border-radius: 2px;
    transition: all 0.3s ease;
    border: 1px solid;
    background: transparent;
  }
  
  /* ã‚«ãƒ†ã‚´ãƒªãƒ¼ã”ã¨ã®è‰²åˆ†ã‘ */
  .list-container .list-row-item[data-category="daw"] .list-category {
    color: #007aff;
    border-color: rgba(0, 122, 255, 0.3);
    background: rgba(0, 122, 255, 0.05);
  }
  .list-container .list-row-item[data-category="gear"] .list-category {
    color: #34c759;
    border-color: rgba(52, 199, 89, 0.3);
    background: rgba(52, 199, 89, 0.05);
  }
  .list-container .list-row-item[data-category="plugin"] .list-category {
    color: #af52de;
    border-color: rgba(175, 82, 222, 0.3);
    background: rgba(175, 82, 222, 0.05);
  }
  .list-container .list-row-item[data-category="biz"] .list-category {
    color: #ff9500;
    border-color: rgba(255, 149, 0, 0.3);
    background: rgba(255, 149, 0, 0.05);
  }
  .list-container .list-row-item[data-category="tips"] .list-category {
    color: #ff2d55;
    border-color: rgba(255, 45, 85, 0.3);
    background: rgba(255, 45, 85, 0.05);
  }
  .list-container .list-row-item[data-category="essay"] .list-category {
    color: #5ac8fa;
    border-color: rgba(90, 200, 250, 0.3);
    background: rgba(90, 200, 250, 0.05);
  }
  
  .list-container .list-row-item:hover .list-category {
    background: currentColor;
    color: #ffffff;
    border-color: currentColor;
  }
  
  /* Column 3: Title (with slide effect) */
  .list-container .list-row-item .list-title {
    grid-column: 3;
    font-family: 'Zen Old Mincho', serif;
    font-size: 1.1rem;
    font-weight: 700;
    line-height: 1.6;
    color: #0f172a;
    margin: 0;
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), color 0.3s ease;
    transform: translateX(0);
  }
  
  .list-container .list-row-item:hover .list-title {
    transform: translateX(8px);
    color: var(--accent-color, #007aff);
  }
  
  /* Column 4: Meta (Tags, etc.) */
  .list-container .list-row-item .list-meta {
    grid-column: 4;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-family: 'Fira Code', monospace;
    font-size: 0.65rem;
    color: #64748b;
    justify-self: end;
  }
  
  .list-container .list-row-item .list-meta .meta-tag {
    padding: 0.2rem 0.5rem;
    background: rgba(0, 122, 255, 0.08);
    color: var(--accent-color, #007aff);
    border-radius: 3px;
    font-size: 0.6rem;
  }

  /* Bento Gridç”¨ã®ã‚«ãƒ©ãƒ ã‚¹ãƒ‘ãƒ³ã‚¯ãƒ©ã‚¹ï¼ˆå…¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã§æœ‰åŠ¹ï¼‰ */
  .col-span-3 { grid-column: span 3; }
  .col-span-4 { grid-column: span 4; }
  .col-span-6 { grid-column: span 6; }
  .col-span-8 { grid-column: span 8; }
  .col-span-12 { grid-column: span 12; }
  .row-span-2 { grid-row: span 2; }
  
  /* ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ã™ã¹ã¦ãƒ•ãƒ«å¹…ã«ä¸Šæ›¸ã */
  @media (max-width: 767px) {
    .col-span-3,
    .col-span-4,
    .col-span-6,
    .col-span-8 {
      grid-column: span 12 !important;
    }
    .row-span-2 {
      grid-row: span 1 !important;
    }
  }

  /* CTA SECTION: CONTROL ROOM - é™çš„HTMLç‰ˆ */
  .cta-section-wrap {
    position: relative;
    border-top: 1px solid var(--line-color);
    border-bottom: 1px solid var(--line-color);
    padding: 4rem 0;
    margin: 4rem 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.9) 100%);
  }

  .cta-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
  }

  @media (max-width: 1023px) {
    .cta-grid {
      grid-template-columns: 1fr;
    }
  }

  .cta-widget-box {
    border-radius: 12px;
    padding: 1.5rem;
    font-family: 'Noto Sans JP', sans-serif;
    min-height: 360px;
  }

  /* å·¦å´: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç›¸è«‡æ¡ˆå†… (ç™½èƒŒæ™¯) */
  .cta-booking-static {
    background: #fff;
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
  }

  .widget-header { margin-bottom: 1.5rem; }
  .header-top { margin-bottom: 0.75rem; }

  .widget-tag-blue {
    font-family: 'Space Grotesk', monospace;
    font-size: 0.6rem;
    font-weight: 600;
    color: #007aff;
    letter-spacing: 0.12em;
    background: rgba(0, 122, 255, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
  }

  .widget-title {
    font-family: 'Zen Old Mincho', serif;
    font-size: 1.3rem;
    font-weight: 700;
    margin: 0.5rem 0 0.25rem 0;
    color: #0f172a;
  }

  .widget-desc {
    font-size: 0.75rem;
    color: #64748b;
    margin: 0;
  }

  .consultation-info {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .info-item {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .info-icon-circle {
    width: 40px;
    height: 40px;
    background: rgba(0, 122, 255, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #007aff;
    flex-shrink: 0;
  }

  .info-content {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .info-label {
    font-size: 0.65rem;
    color: #94a3b8;
    font-weight: 500;
  }

  .info-value {
    font-size: 0.9rem;
    font-weight: 600;
    color: #0f172a;
  }

  .cta-book-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    background: #007aff;
    color: #fff;
    padding: 1rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.95rem;
    text-decoration: none;
    transition: all 0.2s;
    margin-top: 1rem;
  }

  .cta-book-btn:hover {
    background: #0066dd;
    transform: translateY(-1px);
  }

  /* å³å´: æ–™é‡‘æ¡ˆå†… (ãƒ€ãƒ¼ã‚¯èƒŒæ™¯) */
  .cta-pricing-static {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    color: #fff;
  }

  .widget-header-dark { margin-bottom: 1.5rem; }

  .widget-tag-green {
    font-family: 'Space Grotesk', monospace;
    font-size: 0.6rem;
    color: #34d399;
    letter-spacing: 0.15em;
    display: inline-block;
    background: rgba(52, 211, 153, 0.15);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    margin-bottom: 0.5rem;
  }

  .widget-title-dark {
    font-family: 'Zen Old Mincho', serif;
    font-size: 1.2rem;
    font-weight: 700;
    margin: 0 0 0.25rem 0;
  }

  .widget-desc-dark {
    font-size: 0.75rem;
    color: #94a3b8;
    margin: 0;
  }

  .price-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .price-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 0.25rem;
    padding: 1rem 1.25rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }

  .price-item.recommended {
    border-color: rgba(52, 211, 153, 0.5);
    background: rgba(52, 211, 153, 0.1);
  }

  .recommend-badge {
    position: absolute;
    top: -8px;
    right: 12px;
    font-size: 0.55rem;
    background: #34d399;
    color: #0f172a;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-weight: 700;
  }

  .price-duration {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    color: #e2e8f0;
  }

  .price-value {
    font-family: 'Space Grotesk', monospace;
    font-size: 1.5rem;
    font-weight: 700;
  }

  .price-value.free { color: #34d399; }
  .price-value .tax {
    font-size: 0.65rem;
    color: #64748b;
    margin-left: 0.25rem;
    font-weight: 400;
  }

  .price-note {
    font-size: 0.7rem;
    color: #94a3b8;
  }

  .pricing-note {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    margin-top: 1.25rem;
    padding-top: 1.25rem;
    border-top: 1px dashed rgba(255, 255, 255, 0.1);
  }

  .note-icon { font-size: 1rem; flex-shrink: 0; }
  .note-text {
    font-size: 0.7rem;
    color: #94a3b8;
    line-height: 1.6;
  }

  /* Signal Flow wrapper - é«˜ã•æ‹¡å¼µ */
  .signal-flow-wrapper {
    min-height: 280px;
    margin-top: 2rem;
  }

  .signal-flow-wrapper :global(.signal-flow-container) {
    height: 280px !important;
  }

  /* network-canvasã‚¹ã‚¿ã‚¤ãƒ«ã¯SignalFlowLazyã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ */

  .profile-section {
    background: #fff; padding: 4rem 2rem; margin-top: 4rem;
    border-top: 1px solid #e2e8f0;
  }

  .string-canvas { 
    width: 100%; 
    height: 100px; 
    cursor: grab; 
    display: block; 
    opacity: 0.6; 
    pointer-events: auto;
  }
  .string-canvas:active { 
    cursor: grabbing; 
  }
</style>