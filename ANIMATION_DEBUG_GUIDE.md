# アニメーション系の問題を解決するためのプロンプトガイド

## 問題が発生した時の確認手順

### 1. 基本的な確認
```
以下の点を確認してください：
1. ブラウザの強制リロード（Cmd+Shift+R / Ctrl+Shift+R）を実行しましたか？
2. 開発サーバーが再起動されていますか？
3. ファイルが正しく保存されていますか？
4. ブラウザのコンソールにエラーは出ていませんか？
```

### 2. CSSアニメーションが反映されない場合

**良いプロンプト例：**
```
「CSSアニメーションが反映されません。以下を確認してください：
1. 現在のCSSセレクタの優先度（specificity）を確認
2. !importantが不要か確認
3. 他のCSSルールと競合していないか確認
4. ブラウザの開発者ツールで実際に適用されているスタイルを確認
5. CSS transitionとJavaScriptアニメーションが競合していないか確認」
```

### 3. JavaScriptアニメーションが動作しない場合

**良いプロンプト例：**
```
「JavaScriptアニメーションが動作しません。以下を確認してください：
1. 要素が正しく取得できているか（console.logで確認）
2. イベントリスナーが正しく登録されているか
3. 実行タイミングが適切か（DOMContentLoaded, window.load等）
4. GSAP/ScrollTriggerが正しく初期化されているか
5. 他のスクリプトと競合していないか
6. ブラウザコンソールのエラーメッセージを共有してください」
```

### 4. アニメーションが途中で止まる場合

**良いプロンプト例：**
```
「アニメーションが途中で止まります。以下を確認してください：
1. アニメーションのタイムラインが正しく完了しているか
2. CSS transitionとJavaScriptアニメーションが競合していないか
3. 要素のdisplay/visibility/opacityが意図せず変更されていないか
4. z-indexやpositionが正しく設定されているか
5. ブラウザのパフォーマンス問題（メモリリーク等）がないか」
```

## 効果的なプロンプトの書き方

### ✅ 良い例

1. **具体的な症状を説明**
   ```
   「メニューのグリッチアニメーションが表示されません。
   スクロールしても左側のメニューが登場しません。
   ブラウザコンソールにはエラーは出ていません。」
   ```

2. **現在の状態を説明**
   ```
   「現在のコードでは、ScrollTriggerのonEnterで
   glitchInEffect(nav)を呼んでいますが、アニメーションが実行されません。
   要素は取得できています（console.logで確認済み）。」
   ```

3. **期待する動作を明確に**
   ```
   「期待する動作：
   - スクロールでnavTriggerが画面から消えたら
   - 上部メニューを静かに非表示
   - 左側メニューをグリッチアニメーションで登場
   - 画面中央を跨がない」
   ```

4. **試したことを共有**
   ```
   「試したこと：
   - 強制リロード（Cmd+Shift+R）
   - 開発サーバーの再起動
   - ブラウザキャッシュのクリア
   - コンソールでエラー確認（エラーなし）」
   ```

### ❌ 悪い例

1. **抽象的すぎる**
   ```
   「アニメーションが動きません」
   ```

2. **情報が不足**
   ```
   「直してください」
   ```

3. **複数の問題を同時に**
   ```
   「アニメーションとCSSとJavaScript全部直してください」
   ```

## デバッグ用プロンプトテンプレート

```
【アニメーション問題のデバッグ依頼】

問題の症状：
- [具体的に何が起きているか]
- [期待する動作との違い]

現在のコード：
- [該当するファイル名と行番号]
- [関連するコードの抜粋]

確認済みの項目：
- [ ] ブラウザの強制リロード
- [ ] 開発サーバーの再起動
- [ ] ブラウザコンソールのエラー確認
- [ ] 要素の取得確認（console.log）
- [ ] イベントリスナーの登録確認

ブラウザ情報：
- [ブラウザ名とバージョン]
- [コンソールのエラーメッセージ（あれば）]

期待する動作：
- [具体的にどうなってほしいか]
```

## よくある問題と解決方法

### 問題1: CSS transitionとGSAPアニメーションの競合
**解決方法：**
```javascript
// transitionを一時的に無効化
element.style.transition = 'none';
// GSAPアニメーション実行
gsap.to(element, {...});
// transitionを戻す
element.style.transition = '';
```

### 問題2: 要素が取得できない
**解決方法：**
```javascript
// 実行タイミングを確認
window.addEventListener('load', () => {
  const element = document.querySelector('#element');
  if (!element) {
    console.error('要素が見つかりません');
    return;
  }
  // アニメーション実行
});
```

### 問題3: CSSの優先度が低い
**解決方法：**
```css
/* より具体的なセレクタを使用 */
.grid-container.list-mode .lab-card .card-img {
  /* または !important を使用（最終手段） */
  display: block !important;
}
```

### 問題4: ScrollTriggerが動作しない
**解決方法：**
```javascript
// ScrollTriggerのリフレッシュ
ScrollTrigger.refresh();

// または、初期化のタイミングを確認
gsap.registerPlugin(ScrollTrigger);
// DOMContentLoadedまたはwindow.loadで実行
```

## チェックリスト

アニメーション問題を報告する前に：

- [ ] ブラウザの強制リロードを実行
- [ ] 開発サーバーを再起動
- [ ] ブラウザコンソールでエラー確認
- [ ] 該当する要素が存在するか確認
- [ ] 現在のコードを確認（ファイルが保存されているか）
- [ ] 期待する動作を明確に説明できる
- [ ] 具体的な症状を説明できる
